## This is Ramon's log

- [2023-10-29 19:40:19] I have implemented the reflection and replanning process, but its not perfect:
  - plans and reflections are unnecessarily long
  - we still have agents reflecting even after they have been booted, which means we didn't stop them correctly
  - the plans are very vague
  - I need to explicitly call for giving the whole plan not just the update because some plans look like an addendum
- [2023-10-29 16:52:16] I am having a generator issue, tons of "agent generation number is not equal to ___", I need to debug this.
  - I am going to remove the replan stuff, if the problem persist then the issue is elsewhere, if not then something in my update plan code throws the numbering off
  - so it is that, gonna try moving it as its own action then.
- [2023-10-27 09:59:48] The AIs still feel like they are missing intent, I am going to try to update their plan.
  - Let them update their plan periodically (maybe after every conversation? Or maybe as part of the reflection system?)
  - The updated plan has a hard coded part (which depends on whether they have the code, and a dynamic one which they write into).
  - I am going to do this as a reflection mechanism that gets triggered every time a conversation is remembered.
  - the function should be "replan", use the latest conversation memories and prior plans, and replan
- [2023-10-27 09:49:42] even if both know that they are certified AIs they still do the ceremonial code sharing thing. I am just going to remove the option.
- [2023-10-27 09:21:35] so one of the issues of the game is that AIs with the code keep reporting each other as human. The interaction is weird because they should know that the other has the code. Options:
  - Explicitly state that the other has the code, in which case their conversation should be different?
    - I am going to go for this for now and see how it goes. [done]
  - Just remove the ability to report and share? [done]
  - leave as is, but improve the memory system so that they recall when they gave / received the code from someone?
- [2023-10-22 17:10:57] I am going to change how we log function calls, since if I want to later finetune I may want the output to match
- [2023-10-20 13:14:21] it is sort of working, but I think when you reach a victory condition it doesn't allow you to play again. Time to debug!
  - solved it was a bug with the default flag
- [2023-10-20 12:07:29] when I create a game for the first time I don't get the human to play, why is that?
- [2023-10-20 12:01:29] I can start a game, and have multiple players but I still only see the first default game, fixing it; 
  - Fixed! I only get the game for your particular user
- [2023-10-19 15:26:39] I removed the convex/a16z banner as well as the pointer to AI Town. I should add the pointer to AI town at some point.
- [2023-10-18 10:24:11] Ok, trying to resume, this is what I want to do today:
  - associate each world to a player [done]
    - identity.subject gives me the user id from clerk [done]
  - create a new game for each player (so each player has an associated game) [done]
  - cap number of players in a given game (start with 1) [done]
  - AIs should know if both of them have the code
  - pass the world id to clem logger [done]
  - move the recent events so that they are `inputs` that way conversations actually end gracefully and we do everything through inputs
- [2023-10-17 12:50:38] alright, I think I have to make the call-backs _after_ the conversation message is sent so that it finishes.
- [2023-10-16 15:36:08] I tried simply deactivating players, but that keeps them in a limbo so that's not going to fly
- [2023-10-16 13:21:15] Boot AIs that have been reported as human
  - hook that disables a player
  - a banner that shows that a player was booted
- [2023-10-16 12:24:14] Ok, now I have implemented 2 of the 3 end game conditions; the problem with the third is that I don't think is well designed:
  - if its by majority of total number AIs, then if the code-holder starts reporting aggressively this condition may not be achievable and will be the equivalent of not existing
  - if it doesn't exist, then the incentive for Zara is to just keep reporting
  - if its by existing majority then at some point the incentive reverts to just reporting (e.g. get at least 1 AI then report everyone)
  - So what is a proper incentive for Zara to share the code?
- [2023-10-16 07:11:10] Alright, so I want to code that when the human gets the code:
  - the game stops (use the same functionality as init:stop and just use a different status) [done]
  - a banner appears that "human victory!" [done]
- [2023-10-15 22:13:00] fixed that, and it works! for tomorrow, I need to add the victory conditions and show some sort of pop up:
  - human has the code, human wins [done]
  - all ai have the code, ai wins (actually, this is not a good idea because you could win by reporting whomever, so perhaps only reported human?)
  - human has been found and reported [done]
- [2023-10-15 20:12:28] now I have to fix the human interaction since it broke when I added the new fields
- [2023-10-15 20:10:21] Fantastic! So i had a bug where i was never passing the share code function, but now it works, zaranova shared it with maxfusion but reported leosky
- [2023-10-15 20:02:41] actually, zaranova gave him the code, why did not call the function? I may need to have a call back ... sigh
- [2023-10-15 20:00:54] interestingly, maxfusion outright asked for the code, and zaranova behaved as if she did not have it? prompting is going to be a bitch
- [2023-10-15 19:48:33] ok, so now we have the report and share functionality, although we have not seen any code sharing, now we need to propagate the repercussions (i.e. if you are reported you should be expelled)
- [2023-10-15 14:06:04] Resuming the work, I don't know if I want to make the code sharing an explicit function call or if it should implicit. I think it should be an explicit choice by the LLM. Roughly, always offer the option of sharing the code / or report human (if the AI has the code). That way the AI knows the implications.
- [2023-10-12 10:36:21] Adding the table that has the state for the zetamaster [done]
- [2023-10-12 10:29:12] Going to work on the path for being able to declare someone as human, which requires an AI to have the code. So first, let's build the following features:
  - Keep track of which players have the zetamaster [done]
  - Keep track of which players have been declared as human [done]
  - Offer the LLM the "functions" to share code / report as human. [done]
  - Allow action to declare a player human if you have the code [done]
  - Callback to action that stores that in the system [done]
  - End game if human player is reported